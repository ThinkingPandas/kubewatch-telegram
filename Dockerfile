#------------------------------------------------------------------------------
# Set the base image for subsequent instructions:
#------------------------------------------------------------------------------

FROM alpine:3.7

#------------------------------------------------------------------------------
# Environment variables:
#------------------------------------------------------------------------------

ENV GOPATH="/go"

#------------------------------------------------------------------------------
# Build and install:
#------------------------------------------------------------------------------

RUN apk add -U --no-cache -t dev git go musl-dev ca-certificates \
    && go get github.com/prg3/kubewatch \
    && cp ${GOPATH}/bin/kubewatch /usr/local/bin \
    && apk del --purge dev && rm -rf /tmp/* /go \
	&& rm -rf /var/cache/apk/*

#------------------------------------------------------------------------------
# Entrypoint:
#------------------------------------------------------------------------------

ENTRYPOINT [ "kubewatch" ]
